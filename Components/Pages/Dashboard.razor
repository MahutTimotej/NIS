@page "/"
@page "/home"
@using Microsoft.EntityFrameworkCore
@inject NIS.Data.NisDbContext Db

<div class="nis-home">

    <!-- HERO -->
    <section class="card-nis nis-hero mb-3">
        <div class="p-4 p-md-5">
            <div class="d-flex flex-wrap align-items-start gap-3">
                <div class="flex-grow-1">
                    <h1 class="mb-1">Nemocničný informačný systém</h1>
                    <div class="nis-muted">
                        Prehľadná evidencia pacientov, vyšetrení a zdravotnej dokumentácie.
                        Systém je navrhnutý tak, aby podporoval každodennú klinickú prax
                        a rýchlu orientáciu v údajoch.
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <a class="btn nis-btn btn-nis-primary" href="/vysetrenia">
                        <span class="bi bi-clipboard2-pulse-fill me-2"></span> Vyšetrenia
                    </a>
                    <a class="btn nis-btn btn-nis-outline" href="/prijmy">
                        <span class="bi bi-door-open-fill me-2"></span> Príjmy
                    </a>
                </div>
            </div>

            <div class="row g-3 mt-3">
                <div class="col-12 col-md-4">
                    <div class="nis-kpi">
                        <div class="kpi-title">Pacienti</div>
                        <div class="kpi-value">@_pacienti</div>
                        <div class="nis-muted small">evidovaných osôb</div>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="nis-kpi">
                        <div class="kpi-title">Lekári</div>
                        <div class="kpi-value">@_lekari</div>
                        <div class="nis-muted small">zdravotnícky personál</div>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="nis-kpi">
                        <div class="kpi-title">Vyšetrenia</div>
                        <div class="kpi-value">@_vysetrenia</div>
                        <div class="nis-muted small">záznamov v systéme</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- WORKFLOW -->
    <section class="row g-3 mb-3">
        <div class="col-12 col-lg-7">
            <div class="card-nis">
                <div class="card-header">Denná práca v systéme</div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-12 col-md-6">
                            <div class="nis-feature">
                                <div class="nis-feature-icon"><span class="bi bi-person-heart"></span></div>
                                <div>
                                    <div class="fw-bold">Pacient</div>
                                    <div class="nis-muted small">
                                        Vyhľadanie pacienta, prehľad osobných údajov
                                        a nadväzujúcich zdravotných záznamov.
                                    </div>
                                    <a class="btn btn-sm nis-btn btn-nis-outline mt-2" href="/pacienti">
                                        Otvoriť evidenciu
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6">
                            <div class="nis-feature">
                                <div class="nis-feature-icon"><span class="bi bi-clipboard2-pulse-fill"></span></div>
                                <div>
                                    <div class="fw-bold">Vyšetrenie</div>
                                    <div class="nis-muted small">
                                        Záznam vyšetrenia vrátane výsledkov,
                                        časovej osi a obrazovej dokumentácie.
                                    </div>
                                    <a class="btn btn-sm nis-btn btn-nis-outline mt-2" href="/vysetrenia">
                                        Otvoriť vyšetrenia
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6">
                            <div class="nis-feature">
                                <div class="nis-feature-icon"><span class="bi bi-door-open-fill"></span></div>
                                <div>
                                    <div class="fw-bold">Príjem</div>
                                    <div class="nis-muted small">
                                        Evidencia hospitalizácií, oddelení
                                        a priebehu pobytu pacienta.
                                    </div>
                                    <a class="btn btn-sm nis-btn btn-nis-outline mt-2" href="/prijmy">
                                        Otvoriť príjmy
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6">
                            <div class="nis-feature">
                                <div class="nis-feature-icon"><span class="bi bi-receipt-cutoff"></span></div>
                                <div>
                                    <div class="fw-bold">Predpis</div>
                                    <div class="nis-muted small">
                                        Predpis liekov a evidencia dávkovania
                                        v nadväznosti na vyšetrenie.
                                    </div>
                                    <a class="btn btn-sm nis-btn btn-nis-outline mt-2" href="/predpisy">
                                        Otvoriť predpisy
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-3" />

                    <div class="nis-muted">
                        Všetky záznamy sú prehľadne prepojené tak,
                        aby bolo možné sledovať zdravotný stav pacienta v čase.
                    </div>
                </div>
            </div>
        </div>

        <!-- WHAT SYSTEM DOES -->
        <div class="col-12 col-lg-5">
            <div class="card-nis">
                <div class="card-header">Čo systém podporuje</div>
                <div class="card-body">
                    <ul class="nis-list">
                        <li><span class="bi bi-check2-circle"></span> kontinuitu zdravotnej dokumentácie</li>
                        <li><span class="bi bi-check2-circle"></span> prepojenie pacienta, lekára a oddelenia</li>
                        <li><span class="bi bi-check2-circle"></span> archiváciu vyšetrení a obrazových dát</li>
                        <li><span class="bi bi-check2-circle"></span> rýchlu orientáciu v histórii záznamov</li>
                        <li><span class="bi bi-check2-circle"></span> jednotné prostredie pre klinickú prácu</li>
                    </ul>

                    <div class="nis-note mt-3">
                        <div class="fw-bold mb-1">Zameranie systému</div>
                        <div class="nis-muted small">
                            Dôraz je kladený na prehľadnosť, konzistenciu údajov
                            a podporu rozhodovania v klinickej praxi.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- MODULES -->
    <section class="card-nis mb-3">
        <div class="card-header">Moduly systému</div>
        <div class="card-body">
            <div class="row g-3">
                <div class="col-12 col-md-4">
                    <div class="nis-module">
                        <div class="fw-bold"><span class="bi bi-hospital-fill me-2"></span> Oddelenia</div>
                        <div class="nis-muted small">Organizačná štruktúra nemocnice.</div>
                        <a class="btn btn-sm nis-btn btn-nis-outline mt-2" href="/oddelenia">Otvoriť</a>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="nis-module">
                        <div class="fw-bold"><span class="bi bi-door-closed-fill me-2"></span> Izby</div>
                        <div class="nis-muted small">Rozmiestnenie pacientov.</div>
                        <a class="btn btn-sm nis-btn btn-nis-outline mt-2" href="/izby">Otvoriť</a>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="nis-module">
                        <div class="fw-bold"><span class="bi bi-bug-fill me-2"></span> Diagnózy</div>
                        <div class="nis-muted small">Zoznam používaných diagnóz.</div>
                        <a class="btn btn-sm nis-btn btn-nis-outline mt-2" href="/diagnozy">Otvoriť</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FUN FACTS -->
    <section class="card-nis">
        <div class="card-header">Zaujímavosti z medicíny</div>
        <div class="card-body">
            <ul class="nis-list">
                <li>
                    <span class="bi bi-lightbulb"></span>
                    Ľudská DNA je zhodná približne na 99,9 % u všetkých ľudí.
                </li>
                <li>
                    <span class="bi bi-lightbulb"></span>
                    Srdce dospelého človeka prečerpá približne 7 000 litrov krvi denne.
                </li>
                <li>
                    <span class="bi bi-lightbulb"></span>
                    Pečeň má schopnosť regenerácie aj po odstránení veľkej časti tkaniva.
                </li>
                <li>
                    <span class="bi bi-lightbulb"></span>
                    Dnešný deň je približne <strong>na polovici kalendárneho roka</strong>
                    z pohľadu biologických rytmov populácie.
                </li>
            </ul>
        </div>
    </section>

</div>

@code {
    private int _pacienti;
    private int _lekari;
    private int _vysetrenia;

    protected override async Task OnInitializedAsync()
    {
        _pacienti = await Db.N_PACIENTs.CountAsync();
        _lekari = await Db.N_LEKARs.CountAsync();
        _vysetrenia = await Db.N_VYSETRENIEs.CountAsync();
    }
}
